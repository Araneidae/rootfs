L = one two three

A.one = blah
A.two = echh
B.three = ichh
C.two = booh

optiondir = options/configure-network
install = echo install

NETWORKS_LIST ?= $(optiondir)/networks
RESOLV_CONF.pri ?= $(optiondir)/resolv.conf.pri
RESOLV_CONF.lab ?= $(optiondir)/resolv.conf.lab

IPLIST.pri = blah
FSTAB.lab = boohhoo

networks := $(shell $(optiondir)/read-networks $(NETWORKS_LIST))
$(warning networks = $(networks))

install_networks = \
    $(foreach network,$(networks), \
        $(foreach resolv,$($1.$(network)), \
            $(install) -f $(resolv) $2.$(network);))

target:
	echo $(foreach n,$L,$(foreach m,$(A.$(n)),$(m)))
# 	$(foreach network,$(networks),$(foreach resolv,$(RESOLV_CONF.$(network)),$(install) $(resolv) /etc/configure-network/resolv.conf.$(network);))
	$(call install_networks,RESOLV_CONF,/etc/configure-network/resolv.conf)
	$(call install_networks,IPLIST,/etc/configure-network/ip-list)
	$(call install_networks,FSTAB,/etc/fstab)
